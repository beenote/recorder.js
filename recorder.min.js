(function(a){!("function"!=typeof define||!define.amd),"object"==typeof exports;define(function(b,c,d){var e=function(b,c,d){var e={version:1.13,swfObject:null,_callbacks:{},_events:{},_initialized:!1,_flashBlockCatched:!1,options:{},initialize:function(b){if(this.options=b||{},"file:"===a.location.protocol)throw new Error("Due to Adobe Flash restrictions it is not possible to use the Recorder through the file:// protocol. Please use an http server.");this.options.flashContainer||this._setupFlashContainer(),this.bind("initialized",function(){e._initialized=!0,e._flashBlockCatched&&e._defaultOnHideFlash(),b.initialized&&b.initialized()}),this.bind("showFlash",this.options.onFlashSecurity||this._defaultOnShowFlash),this.bind("hideFlash",this._defaultOnHideFlash),this.bind("privacy",this.options.onPrivacyChange),this.bind("noMicrophone",this.options.noMicrophone),this._loadFlash()},clear:function(){e._events={}},setupPrivacy:function(){this.flashInterface().setupPrivacy()},record:function(a){a=a||{},this.clearBindings("recordingStart"),this.clearBindings("recordingProgress"),this.bind("recordingStart",this._defaultOnHideFlash),this.bind("recordingStart",a.start),this.bind("recordingProgress",a.progress),this.bind("recordingHold",a.hold),this.flashInterface().record()},stop:function(){return this.flashInterface()._stop()},play:function(a){a=a||{},this.clearBindings("playingProgress"),this.bind("playingProgress",a.progress),this.bind("playingStop",a.finished),this.flashInterface()._play()},upload:function(a){a.audioParam=a.audioParam||"audio",a.params=a.params||{},a.audioFormat=a.audioFormat||e.AUDIO_FORMAT_WAV,this.clearBindings("uploadSuccess"),this.bind("uploadSuccess",function(b){a.success(e._externalInterfaceDecode(b))}),this.bind("uploadFailure",function(b){a.error(b)}),this.flashInterface().upload(a.url,a.audioParam,a.params,a.audioFormat)},encode:function(a){var a=a||e.AUDIO_FORMAT_WAV;this.flashInterface().encode(a)},audioData:function(a){var b,c,d,e=";",f=[];a&&(b=a.join(";")),c=this.flashInterface().audioData(b).split(e);for(var g=0;g<c.length;g++)d=parseFloat(c[g]),isNaN(d)||f.push(d);return f},request:function(a,b,c,d,e){var f=this.registerCallback(e);this.flashInterface().request(a,b,c,d,f)},clearBindings:function(a){e._events[a]=[]},bind:function(a,b){e._events[a]||(e._events[a]=[]),e._events[a].push(b)},triggerEvent:function(a,b,c){e._executeInWindowContext(function(){if(e._events[a])for(var d=0,f=e._events[a].length;f>d;d++)e._events[a][d]&&e._events[a][d].apply(e,[b,c])})},triggerCallback:function(a,b){e._executeInWindowContext(function(){e._callbacks[a].apply(null,b)})},registerCallback:function(a){var b="CB"+parseInt(999999*Math.random(),10);return e._callbacks[b]=a,b},flashInterface:function(){return this.swfObject?this.swfObject.record?this.swfObject:this.swfObject.children[3].record?this.swfObject.children[3]:void 0:null},_executeInWindowContext:function(b){a.setTimeout(b,1)},_setupFlashContainer:function(){var a=document.createElement("div");a.setAttribute("id","recorderFlashContainer"),a.setAttribute("style","position:fixed;left: -9999px;top: -9999px;z-index: 9999;display:table;width:100%;height:100%;background-color: transparent;");var b=document.createElement("div");b.setAttribute("style","text-align: center; display: table-cell; vertical-align: middle;"),a.appendChild(b),document.body.appendChild(a),this.options.flashContainer=a},_clearFlash:function(){var a=this.options.flashContainer.getElementsByTagName("object").item(0);a&&a.parentNode.removeChild(a)},_loadFlash:function(){this._clearFlash();var a=document.createElement("div");a.setAttribute("id","recorderFlashObject");var b=this.options.flashContainer;b.children.length&&(b=b.firstElementChild),b.appendChild(a),f.embedSWF(this.options.swfSrc,"recorderFlashObject","231","141","10.1.0",void 0,void 0,{allowscriptaccess:"always"},void 0,function(a){a.success?(e.swfObject=a.ref,e._checkForFlashBlock()):e._showFlashRequiredDialog()})},_defaultOnShowFlash:function(){var a=e.options.flashContainer;a.style.width="100%",a.style.height="100%",a.style.left=0,a.style.top=0},_defaultOnHideFlash:function(){var a=e.options.flashContainer;a.style.width="1px",a.style.height="1px",a.style.left="-230px",a.style.top="-140px"},_checkForFlashBlock:function(){var a=e.swfObject;setTimeout(function(){if("undefined"!=typeof a.PercentLoaded&&a.PercentLoaded())var b=setInterval(function(){100===a.PercentLoaded()&&(e._initialized||(e._flashBlockCatched=!0,e.triggerEvent("showFlash")),clearInterval(b))},500)},200)},_showFlashRequiredDialog:function(){e.options.flashContainer.innerHTML="<p>Adobe Flash Player 10.1 or newer is required to use this feature.</p><p><a href='http://get.adobe.com/flashplayer' target='_top'>Get it on Adobe.com.</a></p>",e.options.flashContainer.style.color="white",e.options.flashContainer.style.backgroundColor="#777",e.options.flashContainer.style.textAlign="center",e.triggerEvent("showFlash")},_externalInterfaceDecode:function(a){return a.replace(/%22/g,'"').replace(/%5c/g,"\\").replace(/%26/g,"&").replace(/%25/g,"%")}};if(e.AUDIO_FORMAT_WAV=0,e.AUDIO_FORMAT_MP3=1,a.Recorder=e,void 0==f)var f=function(){function b(){if(!T){try{var a=M.getElementsByTagName("body")[0].appendChild(s("span"));a.parentNode.removeChild(a)}catch(b){return}T=!0;for(var c=P.length,d=0;c>d;d++)P[d]()}}function c(a){T?a():P[P.length]=a}function d(a){if(typeof L.addEventListener!=E)L.addEventListener("load",a,!1);else if(typeof M.addEventListener!=E)M.addEventListener("load",a,!1);else if(typeof L.attachEvent!=E)t(L,"onload",a);else if("function"==typeof L.onload){var b=L.onload;L.onload=function(){b(),a()}}else L.onload=a}function e(){O?g():h()}function g(){var a=M.getElementsByTagName("body")[0],b=s(F);b.setAttribute("type",I);var c=a.appendChild(b);if(c){var d=0;!function(){if(typeof c.GetVariable!=E){var e=c.GetVariable("$version");e&&(e=e.split(" ")[1].split(","),W.pv=[parseInt(e[0],10),parseInt(e[1],10),parseInt(e[2],10)])}else if(10>d)return d++,void setTimeout(arguments.callee,10);a.removeChild(b),c=null,h()}()}else h()}function h(){var a=Q.length;if(a>0)for(var b=0;a>b;b++){var c=Q[b].id,d=Q[b].callbackFn,e={success:!1,id:c};if(W.pv[0]>0){var f=r(c);if(f)if(!u(Q[b].swfVersion)||W.wk&&W.wk<312)if(Q[b].expressInstall&&j()){var g={};g.data=Q[b].expressInstall,g.width=f.getAttribute("width")||"0",g.height=f.getAttribute("height")||"0",f.getAttribute("class")&&(g.styleclass=f.getAttribute("class")),f.getAttribute("align")&&(g.align=f.getAttribute("align"));for(var h={},m=f.getElementsByTagName("param"),n=m.length,o=0;n>o;o++)"movie"!=m[o].getAttribute("name").toLowerCase()&&(h[m[o].getAttribute("name")]=m[o].getAttribute("value"));k(g,h,c,d)}else l(f),d&&d(e);else w(c,!0),d&&(e.success=!0,e.ref=i(c),d(e))}else if(w(c,!0),d){var p=i(c);p&&typeof p.SetVariable!=E&&(e.success=!0,e.ref=p),d(e)}}}function i(a){var b=null,c=r(a);if(c&&"OBJECT"==c.nodeName)if(typeof c.SetVariable!=E)b=c;else{var d=c.getElementsByTagName(F)[0];d&&(b=d)}return b}function j(){return!U&&u("6.0.65")&&(W.win||W.mac)&&!(W.wk&&W.wk<312)}function k(a,b,c,d){U=!0,A=d||null,B={success:!1,id:c};var e=r(c);if(e){"OBJECT"==e.nodeName?(y=m(e),z=null):(y=e,z=c),a.id=J,(typeof a.width==E||!/%$/.test(a.width)&&parseInt(a.width,10)<310)&&(a.width="310"),(typeof a.height==E||!/%$/.test(a.height)&&parseInt(a.height,10)<137)&&(a.height="137"),M.title=M.title.slice(0,47)+" - Flash Player Installation";var f=W.ie&&W.win?"ActiveX":"PlugIn",g="MMredirectURL="+encodeURI(L.location).toString().replace(/&/g,"%26")+"&MMplayerType="+f+"&MMdoctitle="+M.title;if(typeof b.flashvars!=E?b.flashvars+="&"+g:b.flashvars=g,W.ie&&W.win&&4!=e.readyState){var h=s("div");c+="SWFObjectNew",h.setAttribute("id",c),e.parentNode.insertBefore(h,e),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}n(a,b,c)}}function l(a){if(W.ie&&W.win&&4!=a.readyState){var b=s("div");a.parentNode.insertBefore(b,a),b.parentNode.replaceChild(m(a),b),a.style.display="none",function(){4==a.readyState?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)}()}else a.parentNode.replaceChild(m(a),a)}function m(a){var b=s("div");if(W.win&&W.ie)b.innerHTML=a.innerHTML;else{var c=a.getElementsByTagName(F)[0];if(c){var d=c.childNodes;if(d)for(var e=d.length,f=0;e>f;f++)1==d[f].nodeType&&"PARAM"==d[f].nodeName||8==d[f].nodeType||b.appendChild(d[f].cloneNode(!0))}}return b}function n(a,b,c){var d,e=r(c);if(W.wk&&W.wk<312)return d;if(e)if(typeof a.id==E&&(a.id=c),W.ie&&W.win){var f="";for(var g in a)a[g]!=Object.prototype[g]&&("data"==g.toLowerCase()?b.movie=a[g]:"styleclass"==g.toLowerCase()?f+=' class="'+a[g]+'"':"classid"!=g.toLowerCase()&&(f+=" "+g+'="'+a[g]+'"'));var h="";for(var i in b)b[i]!=Object.prototype[i]&&(h+='<param name="'+i+'" value="'+b[i]+'" />');e.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+f+">"+h+"</object>",R[R.length]=a.id,d=r(a.id)}else{var j=s(F);j.setAttribute("type",I);for(var k in a)a[k]!=Object.prototype[k]&&("styleclass"==k.toLowerCase()?j.setAttribute("class",a[k]):"classid"!=k.toLowerCase()&&j.setAttribute(k,a[k]));for(var l in b)b[l]!=Object.prototype[l]&&"movie"!=l.toLowerCase()&&o(j,l,b[l]);e.parentNode.replaceChild(j,e),d=j}return d}function o(a,b,c){var d=s("param");d.setAttribute("name",b),d.setAttribute("value",c),a.appendChild(d)}function p(a){var b=r(a);b&&"OBJECT"==b.nodeName&&(W.ie&&W.win?(b.style.display="none",function(){4==b.readyState?q(a):setTimeout(arguments.callee,10)}()):b.parentNode.removeChild(b))}function q(a){var b=r(a);if(b){for(var c in b)"function"==typeof b[c]&&(b[c]=null);b.parentNode.removeChild(b)}}function r(a){var b=null;try{b=M.getElementById(a)}catch(c){}return b}function s(a){return M.createElement(a)}function t(a,b,c){a.attachEvent(b,c),S[S.length]=[a,b,c]}function u(a){var b=W.pv,c=a.split(".");return c[0]=parseInt(c[0],10),c[1]=parseInt(c[1],10)||0,c[2]=parseInt(c[2],10)||0,b[0]>c[0]||b[0]==c[0]&&b[1]>c[1]||b[0]==c[0]&&b[1]==c[1]&&b[2]>=c[2]?!0:!1}function v(a,b,c,d){if(!W.ie||!W.mac){var e=M.getElementsByTagName("head")[0];if(e){var f=c&&"string"==typeof c?c:"screen";if(d&&(C=null,D=null),!C||D!=f){var g=s("style");g.setAttribute("type","text/css"),g.setAttribute("media",f),C=e.appendChild(g),W.ie&&W.win&&typeof M.styleSheets!=E&&M.styleSheets.length>0&&(C=M.styleSheets[M.styleSheets.length-1]),D=f}W.ie&&W.win?C&&typeof C.addRule==F&&C.addRule(a,b):C&&typeof M.createTextNode!=E&&C.appendChild(M.createTextNode(a+" {"+b+"}"))}}}function w(a,b){if(V){var c=b?"visible":"hidden";T&&r(a)?r(a).style.visibility=c:v("#"+a,"visibility:"+c)}}function x(a){var b=/[\\\"<>\.;]/,c=null!=b.exec(a);return c&&typeof encodeURIComponent!=E?encodeURIComponent(a):a}{var y,z,A,B,C,D,E="undefined",F="object",G="Shockwave Flash",H="ShockwaveFlash.ShockwaveFlash",I="application/x-shockwave-flash",J="SWFObjectExprInst",K="onreadystatechange",L=a,M=document,N=navigator,O=!1,P=[e],Q=[],R=[],S=[],T=!1,U=!1,V=!0,W=function(){var a=typeof M.getElementById!=E&&typeof M.getElementsByTagName!=E&&typeof M.createElement!=E,b=N.userAgent.toLowerCase(),c=N.platform.toLowerCase(),d=/win/.test(c?c:b),e=/mac/.test(c?c:b),f=/webkit/.test(b)?parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,g=!1,h=[0,0,0],i=null;if(typeof N.plugins!=E&&typeof N.plugins[G]==F)i=N.plugins[G].description,!i||typeof N.mimeTypes!=E&&N.mimeTypes[I]&&!N.mimeTypes[I].enabledPlugin||(O=!0,g=!1,i=i.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),h[0]=parseInt(i.replace(/^(.*)\..*$/,"$1"),10),h[1]=parseInt(i.replace(/^.*\.(.*)\s.*$/,"$1"),10),h[2]=/[a-zA-Z]/.test(i)?parseInt(i.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof L.ActiveXObject!=E)try{var j=new ActiveXObject(H);j&&(i=j.GetVariable("$version"),i&&(g=!0,i=i.split(" ")[1].split(","),h=[parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10)]))}catch(k){}return{w3:a,pv:h,wk:f,ie:g,win:d,mac:e}}();!function(){W.w3&&((typeof M.readyState!=E&&"complete"==M.readyState||typeof M.readyState==E&&(M.getElementsByTagName("body")[0]||M.body))&&b(),T||(typeof M.addEventListener!=E&&M.addEventListener("DOMContentLoaded",b,!1),W.ie&&W.win&&(M.attachEvent(K,function(){"complete"==M.readyState&&(M.detachEvent(K,arguments.callee),b())}),L==top&&!function(){if(!T){try{M.documentElement.doScroll("left")}catch(a){return void setTimeout(arguments.callee,0)}b()}}()),W.wk&&!function(){return T?void 0:/loaded|complete/.test(M.readyState)?void b():void setTimeout(arguments.callee,0)}(),d(b)))}(),function(){W.ie&&W.win&&a.attachEvent("onunload",function(){for(var a=S.length,b=0;a>b;b++)S[b][0].detachEvent(S[b][1],S[b][2]);for(var c=R.length,d=0;c>d;d++)p(R[d]);for(var e in W)W[e]=null;W=null;for(var g in f)f[g]=null;f=null})}()}return{registerObject:function(a,b,c,d){if(W.w3&&a&&b){var e={};e.id=a,e.swfVersion=b,e.expressInstall=c,e.callbackFn=d,Q[Q.length]=e,w(a,!1)}else d&&d({success:!1,id:a})},getObjectById:function(a){return W.w3?i(a):void 0},embedSWF:function(a,b,d,e,f,g,h,i,l,m){var o={success:!1,id:b};W.w3&&!(W.wk&&W.wk<312)&&a&&b&&d&&e&&f?(w(b,!1),c(function(){d+="",e+="";var c={};if(l&&typeof l===F)for(var p in l)c[p]=l[p];c.data=a,c.width=d,c.height=e;var q={};if(i&&typeof i===F)for(var r in i)q[r]=i[r];if(h&&typeof h===F)for(var s in h)typeof q.flashvars!=E?q.flashvars+="&"+s+"="+h[s]:q.flashvars=s+"="+h[s];if(u(f)){var t=n(c,q,b);c.id==b&&w(b,!0),o.success=!0,o.ref=t}else{if(g&&j())return c.data=g,void k(c,q,b,m);w(b,!0)}m&&m(o)})):m&&m(o)},switchOffAutoHideShow:function(){V=!1},ua:W,getFlashPlayerVersion:function(){return{major:W.pv[0],minor:W.pv[1],release:W.pv[2]}},hasFlashPlayerVersion:u,createSWF:function(a,b,c){return W.w3?n(a,b,c):void 0},showExpressInstall:function(a,b,c,d){W.w3&&j()&&k(a,b,c,d)},removeSWF:function(a){W.w3&&p(a)},createCSS:function(a,b,c,d){W.w3&&v(a,b,c,d)},addDomLoadEvent:c,addLoadEvent:d,getQueryParamValue:function(a){var b=M.location.search||M.location.hash;if(b){if(/\?/.test(b)&&(b=b.split("?")[1]),null==a)return x(b);for(var c=b.split("&"),d=0;d<c.length;d++)if(c[d].substring(0,c[d].indexOf("="))==a)return x(c[d].substring(c[d].indexOf("=")+1))}return""},expressInstallCallback:function(){if(U){var a=r(J);a&&y&&(a.parentNode.replaceChild(y,a),z&&(w(z,!0),W.ie&&W.win&&(y.style.display="block")),A&&A(B)),U=!1}}}}();return d.exports=e,d.exports}.call(this,b,c,d),f=a.Recorder;return a.Recorder=e,e.noConflict=function(){return a.Recorder=f,e},e})}).call(this,"object"==typeof exports?global:window,"object"==typeof exports?global:window);